// Generated by CoffeeScript 1.6.3
(function() {
  jQuery(function() {
    var error_func;
    error_func = function(response, a, b) {
      if (response.status === 403) {
        if (response.responsJSON.data.message === "User must be a volunteer") {
          $('#content').prepend('<div class="alert alert-error"><button type="button" class="close" data-dismiss="alert">&times;</button>User must be a volunteer.</div>');
        } else {
          window.location = "/login?next=" + window.location;
        }
      }
      return void 0;
    };
    $('.button-div').on('click', '.org-active', function() {
      var button, id, response;
      alert('hai');
      button = $(this);
      if (!button.hasClass('disabled')) {
        id = button.data('id');
        response = $.ajax('/ajax/main/join_org.json', {
          data: {
            'id': id
          },
          success: function(data) {
            return button.removeClass('btn-primary org-active').addClass('btn-success org-disabled disabled').html('Member');
          },
          error: error_func,
          timeout: 3000,
          type: "POST"
        });
      }
      return void 0;
    });
    $('.button-div').on('mouseenter', '.org-disabled', function() {
      $(this).removeClass('disabled btn-success').addClass('btn-danger').html('Remove');
      return void 0;
    });
    $('.button-div').on('mouseleave', '.org-disabled', function() {
      $(this).removeClass('btn-danger').addClass('disabled btn-success').html('Member');
      return void 0;
    });
    $('.button-div').on('click', '.org-disabled', function() {
      var button, id, response;
      button = $(this);
      id = button.data('id');
      response = $.ajax('/ajax/main/unjoin_org.json', {
        data: {
          'id': id
        },
        success: function(data) {
          return button.removeClass('btn-danger btn-success disabled org-disabled').addClass('btn-primary org-active').html('Join organization');
        },
        error: error_func,
        timeout: 3000,
        type: "POST"
      });
      return void 0;
    });
    return void 0;
  });

}).call(this);
